---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const title = "404 - Page Not Found | Marce Anahata";
const description = "Oops, page not found. Take a deep breath and return to the homepage, or explore our latest articles.";

// Latest 3 published posts (not drafts)
const latestPosts = (await getCollection('blog', ({ data, slug }) => !data.draft && slug.startsWith('en/')))
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
  .slice(0, 3);
---

<Layout title={title} description={description} lang="en">
  <main class="min-h-screen bg-[#fafaf9] px-6 py-16">
    <div class="max-w-5xl mx-auto space-y-12">
      <div class="relative overflow-hidden rounded-3xl bg-white border border-stone-200 shadow-sm px-8 py-10 md:px-12">
        <div class="absolute -left-10 -top-10 w-64 h-64 bg-gradient-to-tr from-[#6ed8d9] to-[#5d5a8c] rounded-full blur-[120px] opacity-20"></div>
        <div class="relative flex flex-col gap-4 md:gap-6">
          <span class="inline-flex items-center gap-2 text-sm font-semibold text-[#5d5a8c] bg-[#6ed8d9]/15 px-4 py-2 rounded-full w-fit">404 â€¢ Page Not Found</span>
          <h1 class="text-3xl md:text-4xl font-serif font-bold text-[#243c5a] leading-tight">
            Oops, we couldn't find what you were looking for
          </h1>
          <p class="text-stone-600 text-lg leading-relaxed max-w-2xl">
            Take a deep breath. While we return to center, explore these recent articles that might inspire you.
          </p>
          <div class="flex flex-wrap gap-3">
            <a 
              href="/en" 
              class="inline-flex items-center gap-2 bg-[#243c5a] text-white px-6 py-3 rounded-full font-medium hover:bg-[#5d5a8c] transition-all duration-300 shadow-md hover:shadow-lg"
            >
              Back to homepage
            </a>
            <a
              href="/en/blog"
              class="inline-flex items-center gap-2 border-2 border-[#243c5a] text-[#243c5a] px-6 py-3 rounded-full font-medium hover:bg-[#243c5a] hover:text-white transition-all duration-300"
            >
              View the blog
            </a>
          </div>
        </div>
      </div>
      <section>
        <h2 class="text-xl font-bold mb-4 text-[#243c5a]">Latest Articles</h2>
        <div class="grid md:grid-cols-3 gap-6">
          {latestPosts.map((post) => (
            <a href={`/en/blog/${post.slug.replace(/^en\//, '')}`} class="block group" key={post.slug}>
              <article class="border border-stone-200 rounded-lg p-4 hover:shadow-lg transition-shadow">
                <h3 class="text-lg font-semibold text-[#243c5a] group-hover:text-[#6ed8d9] transition-colors mb-2">{post.data.title}</h3>
                <p class="text-sm text-stone-600 line-clamp-2">{post.data.description}</p>
                <time class="text-xs text-stone-400 mt-2 block">{new Date(post.data.pubDate).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</time>
              </article>
            </a>
          ))}
        </div>
      </section>
    </div>
  </main>
</Layout>
