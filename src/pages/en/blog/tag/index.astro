---
import Layout from "../../../../layouts/Layout.astro";
import { getCollection } from 'astro:content';

const posts = await getCollection('blog', ({ slug }) => slug.startsWith('en/'));
const tagCounts = new Map<string, number>();
posts.forEach(p => (p.data.tags || []).forEach(t => tagCounts.set(t, (tagCounts.get(t) || 0) + 1)));
const tags = Array.from(tagCounts.entries()).sort((a, b) => b[1] - a[1]);

const pageTitle = 'Blog Categories: Yoga, Meditation, Rituals and Wellness';
const pageDescription = 'Explore articles about kundalini yoga, meditation, sound therapy, sacred rituals and holistic wellness. Organize content by topics of breathwork, pranayama, energy healing, mindfulness and personal transformation.';
const canonical = new URL(Astro.url).toString();
---

<Layout title={pageTitle} description={pageDescription}>
  <Fragment slot="head">
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://www.marceanahata.com/images/social-preview-wa.jpg" />
  </Fragment>

  <main class="max-w-5xl mx-auto px-4 py-16">
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-serif text-[#243c5a] mb-4">Explore by Tags</h1>
      <p class="text-stone-600 text-lg">Discover our articles on kundalini yoga, meditation, sound therapy, sacred rituals and holistic wellness. Browse categories of breathwork, energy healing, mindfulness and personal transformation to find exactly what you're looking for.</p>
      
      <div class="mt-8 bg-stone-50 p-6 rounded-lg text-left">
        <h2 class="text-2xl font-serif text-[#243c5a] mb-4">Find the Content You Need</h2>
        <p class="text-stone-600 mb-4">
          At Marce Anahata Wellness Center, we share deep content on kundalini yoga, breathing techniques (pranayama), conscious meditation, vibrational sound therapy, sacred rituals, and comprehensive wellness strategies for personal transformation.
        </p>
      </div>
      
      <div class="mt-6">
        <a href="/en/blog" class="text-sm text-[#243c5a] hover:underline">‚Üê Back to blog</a>
      </div>
    </div>

    {tags.length === 0 ? (
      <p class="text-center text-stone-500">No tags available.</p>
    ) : (
      <ul class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        {tags.map(([t, count]) => (
          <li>
            <a href={`/en/blog/tag/${encodeURIComponent(t)}`} class="flex items-center justify-between bg-white border border-stone-100 rounded-xl px-4 py-3 hover:shadow-md transition-shadow">
              <span class="text-[#243c5a] font-medium">#{t}</span>
              <span class="text-stone-500 text-sm">{count}</span>
            </a>
          </li>
        ))}
      </ul>
    )}
  </main>
</Layout>
