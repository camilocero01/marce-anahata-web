---
// src/pages/clases.astro
import Layout from '../layouts/Layout.astro';
import ReviewsSection from '../components/cards/ReviewsSection.astro';
import { Image } from 'astro:assets';
import clasesYogaImg from '../assets/clase/clases-yoga.webp';
import claseYogaLandingImg from '../assets/clase/clase-yoga-landing.webp';
import { getCollection } from 'astro:content';

// --- DATOS GENERALES ---
const pageInfo = {
  title: "Clases y Talleres de Kundalini Yoga en Medell√≠n - El Poblado",
  subtitle: "Tecnolog√≠a sagrada para fortalecer tu cuerpo, calmar la mente y despertar tu energ√≠a vital en el d√≠a a d√≠a.",
  whatsappMessageGeneral: "Hola Marce Anahata, estoy interesad@ en tus clases de Kundalini Yoga. ¬øPodr√≠as compartirme informaci√≥n sobre precios y packs mensuales?",
};

const whatsappLinkGeneral = `https://wa.me/573207329921?text=${encodeURIComponent(pageInfo.whatsappMessageGeneral)}`; // CAMBIA TU N√öMERO AQU√ç

// 3 posts aleatorios con tags "yoga" o "meditaci√≥n"
const yogaPosts = (await getCollection('blog', ({ data, slug }) =>
  !data.draft && !slug.startsWith('en/') && (data.tags.includes('yoga') || data.tags.includes('meditaci√≥n'))
))
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
  .slice(0, 3);

// --- DEFINICI√ìN DE LAS OFERTAS (Puedes editar esto f√°cilmente) ---
const offerings = [
  {
    icon: "üßò‚Äç‚ôÄÔ∏è",
    title: "Clases Regulares (Grupales)",
    description: "Tu espacio semanal de mantenimiento energ√©tico. √önete a la comunidad para practicar kriyas, pranayamas y meditaciones que te sostienen en la rutina.",
    details: ["Presencial y Online", "Frecuencia semanal", "Packs mensuales disponibles"],
    cta: "Reservar Ahora",
    whatsappMsg: "Hola Marce Anahata, quiero reservar mi lugar en las clases grupales regulares. ¬øC√≥mo procedo?"
  },
  {
    icon: "‚ú®",
    title: "Sesiones Privadas (1 a 1)",
    description: "Un acompa√±amiento personalizado y profundo. Dise√±amos la pr√°ctica seg√∫n tus necesidades espec√≠ficas (ansiedad, prop√≥sito, vitalidad, etc.).",
    details: ["Atenci√≥n 100% personalizada", "Horarios flexibles", "Seguimiento cercano"],
    cta: "Agendar Sesi√≥n",
    whatsappMsg: "Hola Marce Anahata, quiero agendar una sesi√≥n privada de yoga personalizada. ¬øQu√© disponibilidad tienes?"
  },
  {
    icon: "üîÆ",
    title: "Talleres Tem√°ticos Profundos",
    description: "Inmersiones de fin de semana o varias horas para trabajar temas espec√≠ficos: Prosperidad, Relaciones, Sanaci√≥n de Linaje, Chakras, etc.",
    details: ["Tem√°ticas rotativas", "Mayor duraci√≥n y profundidad", "Material de apoyo"],
    cta: "Consultar Talleres",
    whatsappMsg: "Hola Marce Anahata, quisiera informaci√≥n sobre los pr√≥ximos talleres tem√°ticos disponibles."
  }
];
---

<Layout title="Clases y Talleres | Marce Anahata" description="Clases de kundalini yoga presenciales y online en Medell√≠n. Aprende t√©cnicas de respiraci√≥n consciente, meditaci√≥n y kriyas para despertar tu energ√≠a vital.">
  <Fragment slot="head">
    <script type="application/ld+json">{JSON.stringify({
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://marceanahata.com"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Clases y Talleres",
          "item": "https://marceanahata.com/clases"
        }
      ]
    })}</script>
  </Fragment>
  
  <section class="relative h-[60vh] md:h-[70vh] flex items-center justify-center overflow-hidden">
    <div class="absolute inset-0 z-0">
      <Image 
        src={clasesYogaImg} 
        alt="Pr√°ctica de Kundalini Yoga y meditaci√≥n" 
        class="w-full h-full object-cover opacity-90"
        width={1920}
        densities={[1.5, 2]}
        loading="eager"
        fetchpriority="high"
      />
      <div class="absolute inset-0 bg-[#243c5a]/30 mix-blend-multiply"></div>
      <div class="absolute inset-0 bg-stone-100/10 mix-blend-overlay"></div>
    </div>

    <div class="relative z-10 text-center text-white px-6 max-w-4xl mx-auto mt-16">
      <span class="uppercase tracking-[0.2em] text-sm md:text-base mb-4 block text-[#6ed8d9] font-medium">Tu Pr√°ctica Diaria</span>
      <h1 class="text-4xl md:text-6xl font-serif mb-6 leading-tight drop-shadow-sm">{pageInfo.title}</h1>
      <p class="text-lg md:text-xl font-light max-w-2xl mx-auto mb-8 opacity-95 text-stone-50 leading-relaxed">
        {pageInfo.subtitle}
      </p>
       <a 
        href={whatsappLinkGeneral}
        target="_blank"
        class="inline-block bg-[#6ed8d9] text-[#243c5a] px-8 py-4 rounded-full font-bold hover:bg-white transition-all duration-300 transform hover:-translate-y-1 shadow-lg"
      >
        Empezar a Practicar
      </a>
    </div>
  </section>

  <section class="py-20 bg-white px-6">
    <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
      <div class="relative order-2 md:order-1">
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[110%] h-[110%] bg-[#5d5a8c]/5 rounded-full z-0"></div>
        <Image 
          src={claseYogaLandingImg} 
          alt="Maestra de yoga meditando" 
          class="rounded-lg shadow-xl relative z-10 w-full h-[500px] object-cover grayscale hover:grayscale-0 transition-all duration-700"
          width={600}
          height={500}
          densities={[1.5, 2]}
        />
      </div>
      <div class="order-1 md:order-2">
        <h2 class="text-3xl md:text-4xl font-serif text-[#243c5a] mb-6">Yoga para la vida real, no solo para el mat</h2>
        <p class="text-[#243c5a]/80 mb-6 leading-relaxed text-lg">
          Vivimos tiempos r√°pidos y exigentes. Kundalini Yoga (el Yoga de la Conciencia) es una herramienta potente dise√±ada precisamente para esto. No se trata de ser flexible f√≠sicamente, sino de tener una <strong>mente flexible y un sistema nervioso resiliente</strong>.
        </p>
        <p class="text-[#243c5a]/80 mb-8 leading-relaxed text-lg">
          A trav√©s de la combinaci√≥n precisa de movimiento, respiraci√≥n (pranayama), sonido (mantra) y enfoque, logramos cambios r√°pidos en nuestra qu√≠mica interna, pasando del estr√©s a la vitalidad en minutos.
        </p>
        <div class="flex gap-4 flex-wrap font-medium text-[#5d5a8c]">
            <span class="bg-[#5d5a8c]/10 px-4 py-2 rounded-full">Calma Mental</span>
            <span class="bg-[#5d5a8c]/10 px-4 py-2 rounded-full">Vitalidad F√≠sica</span>
            <span class="bg-[#5d5a8c]/10 px-4 py-2 rounded-full">Conexi√≥n Espiritual</span>
        </div>
      </div>
    </div>
  </section>

  <section class="py-24 bg-stone-50 px-6" id="modalidades">
    <div class="max-w-4xl mx-auto text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-serif text-[#243c5a] mb-4">Modalidades de Pr√°ctica</h2>
      <p class="text-[#243c5a]/70 text-lg">Encuentra el formato que mejor se adapta a tu momento actual.</p>
    </div>

    <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
      {offerings.map((offer) => {
        const whatsappLinkOffer = `https://wa.me/573207329921?text=${encodeURIComponent(offer.whatsappMsg)}`; // CAMBIA TU N√öMERO AQU√ç
        return (
        <div class="bg-white p-8 rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 group border border-stone-100 flex flex-col relative overflow-hidden">
          <div class="absolute top-0 left-0 w-full h-1 bg-[#6ed8d9] transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"></div>
          
          <div class="text-5xl mb-6 filter drop-shadow-sm">{offer.icon}</div>
          <h3 class="text-2xl font-serif text-[#243c5a] mb-4">{offer.title}</h3>
          <p class="text-[#243c5a]/70 mb-8 leading-relaxed flex-grow">{offer.description}</p>
          
          <ul class="mb-8 space-y-3">
            {offer.details.map((detail) => (
                <li class="flex items-center gap-2 text-sm text-[#5d5a8c] font-medium">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 text-[#6ed8d9]">
                      <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" />
                    </svg>
                    {detail}
                </li>
            ))}
          </ul>

          <div class="flex flex-col gap-3">
            <a 
              href="/tarifas"
              class="text-center w-full py-3 rounded-lg bg-[#6ed8d9] text-[#243c5a] font-semibold hover:bg-[#5d5a8c] hover:text-white transition-colors shadow-sm"
            >
              Ver Precios
            </a>
            <a 
              href={whatsappLinkOffer}
              target="_blank"
              rel="noopener noreferrer"
              class="text-center w-full py-3 rounded-lg border-2 border-[#243c5a] text-[#243c5a] font-semibold hover:bg-[#243c5a] hover:text-white transition-colors"
            >
              {offer.cta}
            </a>
          </div>
        </div>
      )})}
    </div>
  </section>

  <section class="py-24 bg-white px-6" id="horarios">
    <div class="max-w-6xl mx-auto">
      <div class="text-center mb-16">
        <span class="uppercase tracking-[0.2em] text-sm mb-4 block text-[#6ed8d9] font-medium">Nuestro Calendario</span>
        <h2 class="text-3xl md:text-4xl font-serif text-[#243c5a] mb-4">Horarios Vigentes</h2>
        <p class="text-[#243c5a]/70 text-lg max-w-2xl mx-auto">Elige el horario que mejor se adapte a tu rutina. Todas nuestras clases combaten el estr√©s y despiertan tu vitalidad.</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
        {/* LUNES */}
        <div class="group relative">
          <div class="absolute -inset-0.5 bg-gradient-to-r from-[#5d5a8c] to-[#6ed8d9] rounded-2xl opacity-20 group-hover:opacity-100 transition duration-300 blur"></div>
          <div class="relative bg-white rounded-2xl p-6 border border-[#6ed8d9]/30 hover:border-[#6ed8d9] transition-all">
            <h3 class="text-xl font-serif text-[#243c5a] mb-4 flex items-center gap-2">
              <span class="text-2xl">üìÖ</span>
              Lunes
            </h3>
            <div class="space-y-4">
              <div class="pb-4 border-b border-stone-200">
                <p class="text-sm font-medium text-[#5d5a8c] mb-1">6:30 AM</p>
                <p class="text-[#243c5a] font-semibold">Kundalini Yoga</p>
                <p class="text-xs text-[#243c5a]/60">Meditaci√≥n</p>
              </div>
              <div>
                <p class="text-sm font-medium text-[#5d5a8c] mb-1">7:00 PM</p>
                <p class="text-[#243c5a] font-semibold">Kundalini Yoga</p>
                <p class="text-xs text-[#243c5a]/60">Meditaci√≥n</p>
              </div>
            </div>
          </div>
        </div>

        {/* MARTES */}
        <div class="group relative">
          <div class="absolute -inset-0.5 bg-gradient-to-r from-[#5d5a8c] to-[#6ed8d9] rounded-2xl opacity-20 group-hover:opacity-100 transition duration-300 blur"></div>
          <div class="relative bg-white rounded-2xl p-6 border border-[#6ed8d9]/30 hover:border-[#6ed8d9] transition-all">
            <h3 class="text-xl font-serif text-[#243c5a] mb-4 flex items-center gap-2">
              <span class="text-2xl">üïØÔ∏è</span>
              Martes
            </h3>
            <div>
              <p class="text-sm font-medium text-[#5d5a8c] mb-1">10:30 AM</p>
              <p class="text-[#243c5a] font-semibold">Yoga Restaurativo</p>
              <p class="text-xs text-[#243c5a]/60">Relajo profundo y sanaci√≥n</p>
            </div>
          </div>
        </div>

        {/* MI√âRCOLES */}
        <div class="group relative">
          <div class="absolute -inset-0.5 bg-gradient-to-r from-[#5d5a8c] to-[#6ed8d9] rounded-2xl opacity-20 group-hover:opacity-100 transition duration-300 blur"></div>
          <div class="relative bg-white rounded-2xl p-6 border border-[#6ed8d9]/30 hover:border-[#6ed8d9] transition-all">
            <h3 class="text-xl font-serif text-[#243c5a] mb-4 flex items-center gap-2">
              <span class="text-2xl">‚ö°</span>
              Mi√©rcoles
            </h3>
            <div>
              <p class="text-sm font-medium text-[#5d5a8c] mb-1">8:30 AM</p>
              <p class="text-[#243c5a] font-semibold">Yoga Fit</p>
              <p class="text-xs text-[#243c5a]/60">Energ√≠a y fortalecimiento</p>
            </div>
          </div>
        </div>

        {/* JUEVES */}
        <div class="group relative">
          <div class="absolute -inset-0.5 bg-gradient-to-r from-[#5d5a8c] to-[#6ed8d9] rounded-2xl opacity-20 group-hover:opacity-100 transition duration-300 blur"></div>
          <div class="relative bg-white rounded-2xl p-6 border border-[#6ed8d9]/30 hover:border-[#6ed8d9] transition-all">
            <h3 class="text-xl font-serif text-[#243c5a] mb-4 flex items-center gap-2">
              <span class="text-2xl">üßò</span>
              Jueves
            </h3>
            <div>
              <p class="text-sm font-medium text-[#5d5a8c] mb-1">10:00 AM</p>
              <p class="text-[#243c5a] font-semibold">Kundalini Yoga</p>
              <p class="text-xs text-[#243c5a]/60">Despertar y conciencia</p>
            </div>
          </div>
        </div>

        {/* VIERNES */}
        <div class="group relative">
          <div class="absolute -inset-0.5 bg-gradient-to-r from-[#5d5a8c] to-[#6ed8d9] rounded-2xl opacity-20 group-hover:opacity-100 transition duration-300 blur"></div>
          <div class="relative bg-white rounded-2xl p-6 border border-[#6ed8d9]/30 hover:border-[#6ed8d9] transition-all">
            <h3 class="text-xl font-serif text-[#243c5a] mb-4 flex items-center gap-2">
              <span class="text-2xl">üåä</span>
              Viernes
            </h3>
            <div>
              <p class="text-sm font-medium text-[#5d5a8c] mb-1">4:00 PM</p>
              <p class="text-[#243c5a] font-semibold">Yoga Flow</p>
              <p class="text-xs text-[#243c5a]/60">Movimiento fluido y gr√°cil</p>
            </div>
          </div>
        </div>

        {/* S√ÅBADO */}
        <div class="group relative">
          <div class="absolute -inset-0.5 bg-gradient-to-r from-[#5d5a8c] to-[#6ed8d9] rounded-2xl opacity-20 group-hover:opacity-100 transition duration-300 blur"></div>
          <div class="relative bg-white rounded-2xl p-6 border border-[#6ed8d9]/30 hover:border-[#6ed8d9] transition-all">
            <h3 class="text-xl font-serif text-[#243c5a] mb-4 flex items-center gap-2">
              <span class="text-2xl">‚òÄÔ∏è</span>
              S√°bado
            </h3>
            <div>
              <p class="text-sm font-medium text-[#5d5a8c] mb-1">9:00 AM</p>
              <p class="text-[#243c5a] font-semibold">Kundalini Yoga</p>
              <p class="text-xs text-[#243c5a]/60">Renacimiento semanal</p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-gradient-to-r from-[#5d5a8c]/5 to-[#6ed8d9]/5 rounded-2xl p-8 border border-[#6ed8d9]/20">
        <div class="flex flex-col md:flex-row items-center justify-between gap-6">
          <div>
            <h3 class="text-xl font-semibold text-[#243c5a] mb-2">¬øTienes dudas sobre los horarios?</h3>
            <p class="text-[#243c5a]/70">Todas nuestras clases son presenciales en El Poblado y algunos horarios disponibles online. Cont√°ctame para m√°s detalles.</p>
          </div>
          <a 
            href={whatsappLinkGeneral}
            target="_blank"
            rel="noopener noreferrer"
            class="whitespace-nowrap inline-flex items-center gap-2 bg-[#6ed8d9] text-[#243c5a] px-6 py-3 rounded-full font-semibold hover:bg-[#5d5a8c] hover:text-white transition-all shadow-md"
          >
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd" d="M1.5 4.5a3 3 0 013-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 01-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 006.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 011.955-.694l4.423 1.105c.834.209 1.42.96 1.42 1.82V19.5a3 3 0 01-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5z" clip-rule="evenodd" />
            </svg>
            Consultar por WhatsApp
          </a>
        </div>
      </div>
    </div>
  </section>

  <section class="py-20 bg-[#243c5a] text-white px-6 relative overflow-hidden">
    <div class="absolute inset-0 bg-[url('/images/hero-bg.webp')] opacity-5 mix-blend-overlay"></div> <div class="absolute -top-24 -right-24 w-96 h-96 bg-[#6ed8d9] rounded-full filter blur-[150px] opacity-10"></div>
    <div class="absolute -bottom-24 -left-24 w-96 h-96 bg-[#5d5a8c] rounded-full filter blur-[150px] opacity-20"></div>

    <div class="max-w-4xl mx-auto text-center relative z-10">
      <h2 class="text-3xl md:text-4xl font-serif mb-6">¬øLista para comenzar tu pr√°ctica?</h2>
      <p class="text-white/80 text-lg mb-10 leading-relaxed max-w-2xl mx-auto">
        Reserva tu lugar en las clases o consulta por nuestros packs mensuales y talleres tem√°ticos. Cont√°ctame directamente para recibir toda la informaci√≥n.
      </p>
      
      <a 
        href={whatsappLinkGeneral}
        target="_blank"
        class="inline-flex items-center gap-3 bg-[#6ed8d9] text-[#243c5a] px-8 py-4 rounded-full font-bold hover:bg-white transition-all duration-300 shadow-lg hover:shadow-[#6ed8d9]/20"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
          <path fill-rule="evenodd" d="M1.5 4.5a3 3 0 013-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 01-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 006.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 011.955-.694l4.423 1.105c.834.209 1.42.96 1.42 1.82V19.5a3 3 0 01-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5z" clip-rule="evenodd" />
        </svg>
        Reservar Mi Clase
      </a>
      <p class="mt-6 text-sm text-[#6ed8d9]/80 font-light tracking-wider">Respuesta r√°pida v√≠a WhatsApp</p>
    </div>
  </section>

  {yogaPosts.length > 0 && (
    <section class="max-w-7xl mx-auto px-6 py-20 bg-white">
      <div class="text-center mb-12">
        <h2 class="text-3xl md:text-4xl font-serif text-marce-base-3 mb-4">Art√≠culos sobre Yoga y Meditaci√≥n</h2>
        <p class="text-stone-600 max-w-2xl mx-auto">Profundiza en las pr√°cticas de yoga y meditaci√≥n para integrar estas tecnolog√≠as sagradas en tu d√≠a a d√≠a.</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {yogaPosts.map((post) => (
          <article class="bg-stone-50 rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300 border border-stone-100 flex flex-col">
            {post.data.image && (
              <div class="h-48 overflow-hidden">
                <img
                  src={post.data.image}
                  alt={post.data.title}
                  class="w-full h-full object-cover hover:scale-105 transition-transform duration-700"
                  loading="lazy"
                />
              </div>
            )}
            <div class="p-6 flex flex-col flex-grow">
              <time class="text-xs text-stone-500 mb-2 uppercase tracking-wider">
                {new Date(post.data.pubDate).toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' })}
              </time>
              <h3 class="text-xl font-semibold text-marce-base-3 mb-3 leading-tight">
                {post.data.title}
              </h3>
              <p class="text-stone-600 text-sm mb-4 flex-grow leading-relaxed">
                {post.data.description}
              </p>
              <a
                href={`/blog/${post.slug}`}
                class="text-marce-base-1 font-semibold text-sm hover:text-marce-base-2 transition-colors inline-flex items-center gap-1"
              >
                Leer m√°s
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </a>
            </div>
          </article>
        ))}
      </div>

      <div class="text-center mt-12">
        <a
          href="/blog/tag/yoga"
          class="inline-block px-6 py-3 border-2 border-marce-base-1 text-marce-base-1 rounded-lg hover:bg-marce-base-1 hover:text-white transition-all font-semibold"
        >
          Ver todos los art√≠culos sobre yoga
        </a>
      </div>
    </section>
  )}

  <div class="bg-white">
    <ReviewsSection />
  </div>

</Layout>